<!doctype html>
<html>
<head>
    <base href="../../" />
    <link type="text/css" rel="stylesheet" href="css/style.css"/>
    <link type="text/css" rel="stylesheet" href="css/diff.css"/>
    <script src="../src/dependencies/jquery.js"></script>
    <script src="../src/dependencies/rangy/rangy-core.js"></script>
    <script src="../src/dependencies/rangy/rangy-cssclassapplier.js"></script>
    <script src="../src/dependencies/rangy/rangy-textrange.js"></script>
    <script src="../src/tools/jquery.ui.editor.range.js"></script>
    <script src="../src/tools/jquery.ui.editor.element.js"></script>
    <script src="../src/tools/jquery.ui.editor.fragment.js"></script>
    <script src="../src/tools/jquery.ui.editor.selection.js"></script>
    <script type="text/javascript" src="js/test.js"></script>
    <script type="text/javascript" src="js/helpers.js"></script>
    <script type="text/javascript" src="js/tokens-to-ranges.js"></script>
    <script type="text/javascript" src="js/diff.js"></script>
    <script type="text/javascript" src="js/beautify-html.js"></script>
</head>
<body class="simple">
    <script type="text/javascript">
        rangy.init();
    </script>
    <div class="test-1">
        <h1>Toggle Wrapper 2: Word Group Selection</h1>
        <div class="test-input">
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas
                convallis {dui id erat pellentesque et rhoncus} nunc semper. Suspendisse
                malesuada hendrerit velit nec tristique. Aliquam gravida mauris at
                ligula venenatis rhoncus. Suspendisse interdum, nisi nec consectetur
                pulvinar, lorem augue ornare felis, vel lacinia erat nibh in velit.
            </p>
        </div>
        <div class="test-expected">
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas
                convallis <strong class="cms-bold">dui id erat pellentesque et rhoncus</strong> nunc semper. Suspendisse
                malesuada hendrerit velit nec tristique. Aliquam gravida mauris at
                ligula venenatis rhoncus. Suspendisse interdum, nisi nec consectetur
                pulvinar, lorem augue ornare felis, vel lacinia erat nibh in velit.
            </p>
        </div>
    </div>
    <script type="text/javascript">
        test('.test-1', function(input) {
            var ranges = tokensToRanges(input);
            for (var i = 0; i < ranges.length; i++) {
                rangeToggleWrapper(ranges[i], 'strong', {
                    classes: 'cms-bold'
                });
            }
        });
    </script>

    <div class="test-2">
        <h1>Toggle Wrapper 2: Multiline Selection</h1>
        <div class="test-input">
            <p>
                Hendrerit, felis ac fringilla lobortis, massa ligula aliquet justo, sit
                amet {tincidunt enim quam sollicitudin nisi. Maecenas ipsum augue,
                commodo sit amet aliquet ut, laoreet ut nunc. Vestibulum ante ipsum
                primis in faucibus orci luctus et ultrices posuere cubilia Curae;
                Pellentesque tincidunt eros quis tellus laoreet ac dignissim turpis
                luctus. Integer nunc est, pulvinar ac tempor ac, pretium} ut odio.
            </p>
        </div>
        <div class="test-expected">
            <p>
                Hendrerit, felis ac fringilla lobortis, massa ligula aliquet justo, sit
                amet <strong class="cms-bold">tincidunt enim quam sollicitudin nisi. Maecenas ipsum augue,
                commodo sit amet aliquet ut, laoreet ut nunc. Vestibulum ante ipsum
                primis in faucibus orci luctus et ultrices posuere cubilia Curae;
                Pellentesque tincidunt eros quis tellus laoreet ac dignissim turpis
                luctus. Integer nunc est, pulvinar ac tempor ac, pretium</strong> ut odio.
            </p>
        </div>
    </div>
    <script type="text/javascript">
        test('.test-2', function(input) {
            var ranges = tokensToRanges(input);
            for (var i = 0; i < ranges.length; i++) {
                rangeToggleWrapper(ranges[i], 'strong', {
                    classes: 'cms-bold'
                });
            }
        });
    </script>

    <div class="test-3">
        <h1>Toggle Wrapper 2: Combo Selection</h1>
        <div class="test-input">
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas
                convallis dui id erat pellentesque et rhoncus nunc semper. Suspendisse
                malesuada {hendrerit velit nec }tristique. Aliq{uam gravida mauris at
                ligula venenatis rhoncus. Suspendisse inter}dum, nisi nec consectetur
                pulvinar, lorem augue ornare felis, vel lacinia erat nibh in ve{lit.
            </p>
            <p>
                Hendr}erit, felis ac fringilla lobortis, massa ligula aliquet justo, sit
                amet tincidunt enim quam {sollicitudin} nisi. Maecenas ipsum augue,
                commodo sit amet aliquet ut, laoreet ut nunc. Vestibulum ante ipsum
                primis in {fauc}ibus orci luctus et ultrices posuere cubilia Curae;
                Pellentesque tincidunt eros quis tellus laoreet ac dignissim turpis
                luctus. Integer nunc est, {pulvinar ac tempor ac, pretium ut odio.
            </p>
            <p>
                Pellentesque in arcu sit amet} odio scelerisque tincidunt. Lorem ipsum
                dolor sit amet, consectetur adipiscing elit. Pellentesque habitant morbi
                tristique senectus et netus et malesuada fames ac turpis egestas.
            </p>
        </div>
        <div class="test-expected">
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas
                convallis dui id erat pellentesque et rhoncus nunc semper. Suspendisse
                malesuada <strong class="cms-bold">hendrerit velit nec</strong> tristique. Aliq<strong class="cms-bold">uam gravida mauris at
                ligula venenatis rhoncus. Suspendisse inter</strong>dum, nisi nec consectetur
                pulvinar, lorem augue ornare felis, vel lacinia erat nibh in ve<strong class="cms-bold">lit.</strong>
            </p>
            <p>
                <strong class="cms-bold">Hendr</strong>erit, felis ac fringilla lobortis, massa ligula aliquet justo, sit
                amet tincidunt enim quam <strong class="cms-bold">sollicitudin</strong> nisi. Maecenas ipsum augue,
                commodo sit amet aliquet ut, laoreet ut nunc. Vestibulum ante ipsum
                primis in <strong class="cms-bold">fauc</strong>ibus orci luctus et ultrices posuere cubilia Curae;
                Pellentesque tincidunt eros quis tellus laoreet ac dignissim turpis
                luctus. Integer nunc est, <strong class="cms-bold">pulvinar ac tempor ac, pretium ut odio.</strong>
            </p>
            <p>
                <strong class="cms-bold">Pellentesque in arcu sit amet</strong> odio scelerisque tincidunt. Lorem ipsum
                dolor sit amet, consectetur adipiscing elit. Pellentesque habitant morbi
                tristique senectus et netus et malesuada fames ac turpis egestas.
            </p>
        </div>
    </div>
    <script type="text/javascript">
        test('.test-3', function(input) {
            var ranges = tokensToRanges(input);
            for (var i = 0; i < ranges.length; i++) {
                rangeTrim(ranges[i]);
                rangeToggleWrapper(ranges[i], 'strong', {
                    classes: 'cms-bold'
                });
            }
            var selection = rangy.getSelection();
            selection.setRanges(ranges);
            selection.refresh();
        }, false);
    </script>
</body>
</html>